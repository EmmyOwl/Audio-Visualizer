import { analyze } from './helpers/analyze';
import { guess } from './helpers/guess';
/*
 * @todo Explicitly referencing the barrel file seems to be necessary when enabling the
 * isolatedModules compiler option.
 */
export * from './interfaces/index';
export * from './types/index';
addEventListener('message', ({ data }) => {
    try {
        if (data.method === 'analyze') {
            const { id, params: { channelData, sampleRate, tempoSettings } } = data;
            const tempo = analyze(channelData, sampleRate, tempoSettings);
            postMessage({
                error: null,
                id,
                result: { tempo }
            });
        }
        else if (data.method === 'guess') {
            const { id, params: { channelData, sampleRate, tempoSettings } } = data;
            const { bpm, offset, tempo } = guess(channelData, sampleRate, tempoSettings);
            postMessage({
                error: null,
                id,
                result: { bpm, offset, tempo }
            });
        }
        else {
            throw new Error(`The given method "${data.method}" is not supported`);
        }
    }
    catch (err) {
        postMessage({
            error: {
                message: err.message
            },
            id: data.id,
            result: null
        });
    }
});
//# sourceMappingURL=module.js.map